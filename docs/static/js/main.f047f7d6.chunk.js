(this["webpackJsonpTRON-Mensajes"]=this["webpackJsonpTRON-Mensajes"]||[]).push([[0],{194:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(57),o=n.n(c),s=n(2),l=n.n(s),i=n(5),d=n(10),u=n(11),m=n(13),f=n(12),p=n(58),b=n.n(p),h={tronWeb:!1,contract:!1,setTronWeb(e){this.tronWeb=e},setContract(e,t){var n=this;return Object(i.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.contract().at(t);case 2:n.contract=a.sent;case 3:case"end":return a.stop()}}),a)})))()}},w=n(14),v=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={allMs:[]},a.addMs=a.addMs.bind(Object(w.a)(a)),a.getMsMensaje=a.getMsMensaje.bind(Object(w.a)(a)),a.adress=a.adress.bind(Object(w.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.setContract(window.tronWeb,"TE2Yndwa6HBeqoPscrYfyZnV3gQEdhRLeq");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"adress",value:function(e){document.getElementById("direccion").value=e,document.getElementById("mensaje").focus()}},{key:"getMsMensaje",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c,o,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.allMs,e.next=3,h.contract.getMsMensaje(0).call();case 3:n=e.sent,a=parseInt(n[1]._hex),c=0,t.splice(0),o=l.a.mark((function e(){var n,a,o,i,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.contract.getMsMensaje(c).call();case 2:return n=e.sent,e.next=5,window.tronWeb.trx.getAccount();case 5:a=e.sent,o=a.address,o=window.tronWeb.address.fromHex(o),"nada por aqui"!==n[0]&&(window.tronWeb.address.fromHex(n[2])===o?(i=r.a.createElement("div",{className:"alert alert-primary",role:"alert"},r.a.createElement("div",{className:"mb-2 text-muted"},"Para: ",r.a.createElement("span",null,r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){return s.adress(window.tronWeb.address.fromHex(n[3]))}},window.tronWeb.address.fromHex(n[3])))),r.a.createElement("hr",null),r.a.createElement("div",{className:"font-weight-bold"},n[0])),t.splice(0,0,i)):(d=r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement("div",{className:"mb-2 text-muted"},"Responder: ",r.a.createElement("span",null,r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return s.adress(window.tronWeb.address.fromHex(n[2]))}},window.tronWeb.address.fromHex(n[2])))),r.a.createElement("hr",null),r.a.createElement("div",{className:"font-weight-bold"},n[0])),t.splice(0,0,d))),c++;case 10:case"end":return e.stop()}}),e)}));case 8:if(!(c<=a)){e.next=12;break}return e.delegateYield(o(),"t0",10);case 10:e.next=8;break;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addMs",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.allMs,n=document.getElementById("mensaje").value,a=document.getElementById("direccion").value,c=r.a.createElement("div",{className:"alert alert alert-success",role:"alert"},r.a.createElement("div",{className:"mb-2 text-muted"},"Para: ",a),r.a.createElement("hr",null),r.a.createElement("div",{className:"font-weight-bold"},n)),t.splice(0,0,c),document.getElementById("mensaje").value="",document.getElementById("direccion").value="",e.abrupt("return",h.contract.addMs(n,a).send());case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.allMs;return r.a.createElement("div",{className:"eCommerce-component-container"},r.a.createElement("form",{action:"",className:"alert alert-success"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleFormControlTextarea1"},"Direcci\xf3n"),r.a.createElement("textarea",{className:"form-control",id:"direccion",rows:"1",placeholder:"TB7.......r4XvF"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleFormControlTextarea2"},"Escribe tu mensaje"),r.a.createElement("textarea",{className:"form-control",id:"mensaje",rows:"3",placeholder:"Escribe tu mensaje"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-success",type:"button",onClick:function(){return e.addMs()}},"Enviar"),"Costo aproximado: 106420 Energ\xeda + 412 Ancho de Banda")),r.a.createElement("div",{className:"eCommerce-item-container"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.getMsMensaje()}},"Ver mis Mensajes"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"eCommerce-item-container"},t))}}]),n}(a.Component),E=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={accountAddress:"account address will show up here",accountBalance:"account balance will show up here",accountBandwidth:"account bandwidth will show up here"},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchAccountAddress(),this.fetchAccountBalance(),this.fetchAccountBandwidth()}},{key:"fetchAccountAddress",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getAccount();case 2:t=e.sent,n=t.address,a=window.tronWeb.address.fromHex(n),this.setState({accountAddress:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccountBalance",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getBalance();case 2:t=e.sent,n=window.tronWeb.fromSun(t),this.setState({accountBalance:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccountBandwidth",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getBandwidth();case 2:t=e.sent,this.setState({accountBandwidth:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.accountAddress,n=e.accountBalance,a=e.accountBandwidth;return r.a.createElement("div",{className:"tronLinkInfo-component-container"},r.a.createElement("div",{className:"account-info-header"}," Account Information "),r.a.createElement("div",{className:"account-info-address"},"Address: ",r.a.createElement("span",null,t)),r.a.createElement("div",{className:"account-info-balance"},"Balance: ",r.a.createElement("span",null,n)),r.a.createElement("div",{className:"account-info-bandwidth"},"Bandwidth: ",r.a.createElement("span",null,a)))}}]),n}(a.Component),g=n(59),k=n.n(g),x="https://chrome.google.com/webstore/detail/ibnejdfjmmkpcnlpebklmnkoeoihofec/",N=r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:k.a,alt:"TronLink logo"})),W=function(){window.open(x,"_blank")},j=function(e){var t=e.installed;return void 0!==t&&t?r.a.createElement("div",{className:"tronLink hover",onClick:W},r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,"Log in Required"),r.a.createElement("p",null,"TronLink is installed but you must first log in. Open TronLink from the browser bar and set up your first wallet or decrypt a previously-created wallet.")),N):r.a.createElement("div",{className:"tronLink",onClick:W},r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,"TronLink Required"),r.a.createElement("p",null,"To create a post or tip others you must install TronLink. TronLink is a TRON wallet for the browser that can be ",r.a.createElement("a",{href:x,target:"_blank",rel:"noopener noreferrer"},"installed from the Chrome Webstore"),". Once installed, return back and refresh the page.")),N)},y=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={tronWeb:{installed:!1,loggedIn:!1}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n={installed:!!window.tronWeb,loggedIn:window.tronWeb&&window.tronWeb.ready};if(n.installed)return t.setState({tronWeb:n}),e();var a=0,r=setInterval((function(){if(a>=10){return window.tronWeb=new b.a("https://api.trongrid.io","https://api.trongrid.io","https://api.trongrid.io"),t.setState({tronWeb:{installed:!1,loggedIn:!1}}),clearInterval(r),e()}if(n.installed=!!window.tronWeb,n.loggedIn=window.tronWeb&&window.tronWeb.ready,!n.installed)return a++;t.setState({tronWeb:n}),e()}),100)}));case 2:this.state.tronWeb.loggedIn||(window.tronWeb.defaultAddress={hex:window.tronWeb.address.toHex("TWiWt5SEDzaEqS6kE5gandWMNfxR2B5xzg"),base58:"TWiWt5SEDzaEqS6kE5gandWMNfxR2B5xzg"},window.tronWeb.on("addressChange",(function(){t.state.tronWeb.loggedIn||t.setState({tronWeb:{installed:!0,loggedIn:!0}})}))),h.setTronWeb(window.tronWeb);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.tronWeb.installed?this.state.tronWeb.loggedIn?r.a.createElement("div",null,r.a.createElement("header",{className:"header-container"},r.a.createElement("div",{className:"resource-links-container"},r.a.createElement("div",{className:"app-title"},"TRX-Mensajes (Mensajes descentralizados)"),r.a.createElement("a",{className:"",href:"https://developers.tron.network/docs",rel:"noopener noreferrer",target:"_blank"},"Gu\xedas"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://developers.tron.network/docs",rel:"noopener noreferrer",target:"_blank"},"API Reference"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://tronscan.org/#/",rel:"noopener noreferrer",target:"_blank"},"TronScan"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://tronstation.io/",rel:"noopener noreferrer",target:"_blank"},"TronStation")),r.a.createElement(E,null)),r.a.createElement("div",null,r.a.createElement(v,null))):r.a.createElement(j,{installed:!0}):r.a.createElement(j,null)}}]),n}(a.Component),M=document.getElementById("root");o.a.render(r.a.createElement(y,null),M)},59:function(e,t,n){e.exports=n.p+"static/media/TronLinkLogo.d3a8f115.png"},60:function(e,t,n){e.exports=n(194)},89:function(e,t){},90:function(e,t){}},[[60,1,2]]]);
//# sourceMappingURL=main.f047f7d6.chunk.js.map