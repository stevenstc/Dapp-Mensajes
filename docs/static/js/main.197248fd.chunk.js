(this["webpackJsonpDes-Mensajes"]=this["webpackJsonpDes-Mensajes"]||[]).push([[0],{194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(57),o=n.n(c),s=n(2),i=n.n(s),l=n(5),u=n(10),d=n(11),m=n(13),f=n(12),p=n(58),h=n.n(p),b={tronWeb:!1,contract:!1,setTronWeb(e){this.tronWeb=e},setContract(e,t){var n=this;return Object(l.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.contract().at(t);case 2:n.contract=a.sent;case 3:case"end":return a.stop()}}),a)})))()}},w=n(15),v=(n(194),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={allMs:[]},a.addMs=a.addMs.bind(Object(w.a)(a)),a.getMsMensaje=a.getMsMensaje.bind(Object(w.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.setContract(window.tronWeb,"TPKBp42yMoudBof4g5ATm5XvC9mb9fkGe7");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getMsMensaje",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.allMs,e.next=3,b.contract.getMsMensaje(1).call();case 3:n=e.sent,a=parseInt(n[1]._hex),c=1,t.splice(0);case 7:if(!(c<=a)){e.next=15;break}return e.next=10,b.contract.getMsMensaje(c).call();case 10:"nada por aqui"!==(o=e.sent)[0]&&t.push(r.a.createElement("div",{className:"alert alert-secondary",role:"alert"},r.a.createElement("div",{className:"font-weight-bold"},o[0]),r.a.createElement("hr",null),r.a.createElement("div",{className:"mb-2 text-muted"},"Remitente: ",window.tronWeb.address.fromHex(o[2])))),c++,e.next=7;break;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addMs",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("mensaje").value,n=document.getElementById("direccion").value,e.abrupt("return",b.contract.addMs(t,n).send());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.allMs;return r.a.createElement("div",{className:"eCommerce-component-container"},r.a.createElement("form",{action:"",className:"alert alert-success"},r.a.createElement("input",{type:"text",name:"mensaje",id:"mensaje",placeholder:"Escribe tu mensaje"}),r.a.createElement("input",{type:"text",name:"direccion",id:"direccion",placeholder:"TB7RTxBPY4eMvKjceXj8SWjVnZCrWr4XvF"}),r.a.createElement("button",{type:"button",onClick:function(){return e.addMs()}},"Enviar")),r.a.createElement("div",{className:"eCommerce-item-container"},t),r.a.createElement("div",{className:"eCommerce-item-container"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.getMsMensaje()}},"Ver mis Mensajes")))}}]),n}(a.Component)),E=(n(195),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={accountAddress:"account address will show up here",accountBalance:"account balance will show up here",accountBandwidth:"account bandwidth will show up here"},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.fetchAccountAddress(),this.fetchAccountBalance(),this.fetchAccountBandwidth()}},{key:"fetchAccountAddress",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getAccount();case 2:t=e.sent,n=t.address,a=window.tronWeb.address.fromHex(n),this.setState({accountAddress:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccountBalance",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getBalance();case 2:t=e.sent,n=window.tronWeb.fromSun(t),this.setState({accountBalance:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccountBandwidth",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.tronWeb.trx.getBandwidth();case 2:t=e.sent,this.setState({accountBandwidth:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.accountAddress,n=e.accountBalance,a=e.accountBandwidth;return r.a.createElement("div",{className:"tronLinkInfo-component-container"},r.a.createElement("div",{className:"account-info-header"}," Account Information "),r.a.createElement("div",{className:"account-info-address"},"Address: ",r.a.createElement("span",null,t)),r.a.createElement("div",{className:"account-info-balance"},"Balance: ",r.a.createElement("span",null,n)),r.a.createElement("div",{className:"account-info-bandwidth"},"Bandwidth: ",r.a.createElement("span",null,a)))}}]),n}(a.Component)),g=n(59),k=n.n(g),j=(n(196),"https://chrome.google.com/webstore/detail/ibnejdfjmmkpcnlpebklmnkoeoihofec/"),W=r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:k.a,alt:"TronLink logo"})),x=function(){window.open(j,"_blank")},y=function(e){var t=e.installed;return void 0!==t&&t?r.a.createElement("div",{className:"tronLink hover",onClick:x},r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,"Log in Required"),r.a.createElement("p",null,"TronLink is installed but you must first log in. Open TronLink from the browser bar and set up your first wallet or decrypt a previously-created wallet.")),W):r.a.createElement("div",{className:"tronLink",onClick:x},r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,"TronLink Required"),r.a.createElement("p",null,"To create a post or tip others you must install TronLink. TronLink is a TRON wallet for the browser that can be ",r.a.createElement("a",{href:j,target:"_blank",rel:"noopener noreferrer"},"installed from the Chrome Webstore"),". Once installed, return back and refresh the page.")),W)},M=(n(197),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={tronWeb:{installed:!1,loggedIn:!1}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n={installed:!!window.tronWeb,loggedIn:window.tronWeb&&window.tronWeb.ready};if(n.installed)return t.setState({tronWeb:n}),e();var a=0,r=setInterval((function(){if(a>=10){return window.tronWeb=new h.a("https://api.trongrid.io","https://api.trongrid.io","https://api.trongrid.io"),t.setState({tronWeb:{installed:!1,loggedIn:!1}}),clearInterval(r),e()}if(n.installed=!!window.tronWeb,n.loggedIn=window.tronWeb&&window.tronWeb.ready,!n.installed)return a++;t.setState({tronWeb:n}),e()}),100)}));case 2:this.state.tronWeb.loggedIn||(window.tronWeb.defaultAddress={hex:window.tronWeb.address.toHex("TWiWt5SEDzaEqS6kE5gandWMNfxR2B5xzg"),base58:"TWiWt5SEDzaEqS6kE5gandWMNfxR2B5xzg"},window.tronWeb.on("addressChange",(function(){t.state.tronWeb.loggedIn||t.setState({tronWeb:{installed:!0,loggedIn:!0}})}))),b.setTronWeb(window.tronWeb);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.tronWeb.installed?this.state.tronWeb.loggedIn?r.a.createElement("div",null,r.a.createElement("header",{className:"header-container"},r.a.createElement("div",{className:"resource-links-container"},r.a.createElement("div",{className:"app-title"},"TRX-Mensajes (Mensajes descentralizados)"),r.a.createElement("a",{className:"",href:"https://developers.tron.network/docs",rel:"noopener noreferrer",target:"_blank"},"Gu\xedas"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://developers.tron.network/docs",rel:"noopener noreferrer",target:"_blank"},"API Reference"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://tronscan.org/#/",rel:"noopener noreferrer",target:"_blank"},"TronScan"),"\xa0 - \xa0",r.a.createElement("a",{className:"",href:"https://tronstation.io/",rel:"noopener noreferrer",target:"_blank"},"TronStation")),r.a.createElement(E,null)),r.a.createElement("div",null,r.a.createElement(v,null))):r.a.createElement(y,{installed:!0}):r.a.createElement(y,null)}}]),n}(a.Component)),N=document.getElementById("root");o.a.render(r.a.createElement(M,null),N)},59:function(e,t,n){e.exports=n.p+"static/media/TronLinkLogo.d3a8f115.png"},60:function(e,t,n){e.exports=n(198)},89:function(e,t){},90:function(e,t){}},[[60,1,2]]]);
//# sourceMappingURL=main.197248fd.chunk.js.map